/*
  MIT licence

*/
function encodeURIComponentRFC3986(a){return encodeURIComponent(a).replace(/[!*'()]/g,function(b){return"%"+b.charCodeAt(0).toString(16)})}
jQuery.multiSocialService={url:encodeURIComponentRFC3986(location.href),useService:["twitter","facebookLike","hatenaBookmark","evernoteClip","mixiLike","greeLike"],enableTracking:false,hatenaBookmark:{type:"horizontal"},twitter:{tweet:{type:"horizontal",lang:"",text:"",via:""},follow:{user:"","data-button":"","data-text-color":"","data-link-color":"",show_count:"true",lang:"ja"},tweetLite:{text:"",via:""}},facebook:{like:{type:"button_count",show_faces:"false",color:"light",width:100,height:23,lang:"",
send:"false",ogp:{title:document.title,image:"",description:"",app_id:"",type:"blog",site_name:""}},likeLite:{},comments:{num_posts:"3",width:"500",app_id:""}},evernote:{clip:{targetId:"container",name:"",tag:"",url:"",noteTitle:$("title").text()}},mixi:{check:{"data-key":"","data-url":"","data-button":"button-1"},like:{href:"",service_key:"",width:"450",height:"80",show_faces:"false"}},gree:{like:{href:"",service_key:"",type:0,height:20}},google:{plus1:{lang:"ja",callback:"",count:true,size:""}}};
jQuery.fn.setMultiSocialService=function(){for(var a="<div class='multiSocialService-container'><ul class='multiSocialService-list' style='list-style-type:none'>",b=0,c=jQuery.multiSocialService.useService.length;b<c;b++)switch(jQuery.multiSocialService.useService[b]){case "hatenaBookmark":a+='<li class="multiSocialService-hatenaBookmark">'+jQuery("<li />").setHatenaBookmark(jQuery.multiSocialService.hatenaBookmark).html()+"</li>";break;case "twitter":a+='<li class="multiSocialService-twitter">'+
jQuery("<li />").setTwitter(jQuery.multiSocialService.twitter.tweet).html()+"</li>";break;case "facebookLike":a+='<li class="multiSocialService-facebookLike">'+jQuery("<li />").setFacebookLike(jQuery.multiSocialService.facebook.like).html()+"</li>";break;case "evernoteClip":a+='<li class="multiSocialService-evernoteClip">'+jQuery("<li />").setEvernoteClip(jQuery.multiSocialService.evernote.clip).html()+"</li>";break;case "mixiCheck":a+='<li class="multiSocialService-mixiCheck">'+jQuery("<li />").setMixiCheck(jQuery.multiSocialService.mixi.check).html()+
"</li>";break;case "mixiLike":a+='<li class="multiSocialService-mixiLike">'+jQuery("<li />").setMixiLike(jQuery.multiSocialService.mixi.like).html()+"</li>";break;case "greeLike":a+='<li class="multiSocialService-greeLike">'+jQuery("<li />").setGreeLike(jQuery.multiSocialService.gree.like).html()+"</li>";break;case "googlePlus1":a+='<li class="multiSocialService-googlePlus1">'+jQuery("<li />").setGooglePlus1(jQuery.multiSocialService.google.plus1).html()+"</li>";break}a+="</ul></div>";$(this).html($(a).find("li").css("display",
"inline").end().html());return this};jQuery.multiSocialService.initialize=function(a){if(typeof a==="string")a=encodeURIComponentRFC3986(decodeURIComponent(a));else a.url=encodeURIComponentRFC3986(decodeURIComponent(a.url));return a};
jQuery.fn.setHatenaBookmark=function(a){a=jQuery.multiSocialService.initialize(jQuery.extend(true,{},jQuery.multiSocialService.hatenaBookmark,a));a='\t\t\t\t\t\t\t <a href="http://b.hatena.ne.jp/entry/'+jQuery.multiSocialService.url+'" \t\t\t\t\t\t\t class="hatena-bookmark-button" data-hatena-bookmark-layout="'+a.type+'" \t\t\t\t\t\t\t title="\u3053\u306e\u30a8\u30f3\u30c8\u30ea\u30fc\u3092\u306f\u3066\u306a\u30d6\u30c3\u30af\u30de\u30fc\u30af\u306b\u8ffd\u52a0">\t\t\t\t\t\t\t <img src="http://b.st-hatena.com/images/entry-button/button-only.gif" \t\t\t\t\t\t\t alt="\u3053\u306e\u30a8\u30f3\u30c8\u30ea\u30fc\u3092\u306f\u3066\u306a\u30d6\u30c3\u30af\u30de\u30fc\u30af\u306b\u8ffd\u52a0" width="20" height="20" \t\t\t\t\t\t\t style="border: none;" />\t\t\t\t\t\t\t </a>\t\t\t\t\t\t\t <script type="text/javascript" src="http://b.st-hatena.com/js/bookmark_button.js" charset="utf-8" async="async"><\/script>';
$(this).html(a);return this};
jQuery.fn.setTwitter=function(a){a=jQuery.extend(true,{},jQuery.multiSocialService.twitter.tweet,a);a.url=$.type(a.url)==="string"&&a.url.length>0?encodeURIComponentRFC3986(a.url):jQuery.multiSocialService.url;var b='\t\t\t\t\t\t<a href="http://twitter.com/share" data-url="'+a.url+'" \t\t\t\t\t\tclass="twitter-share-button" data-count="'+a.type+'" data-via="'+a.via+'" \t\t\t\t\t\tdata-text="'+a.text+'" data-lang="'+a.lang+'">Tweet</a><script type="text/javascript"\t\t\t\t\t\tsrc="http://platform.twitter.com/widgets.js" charset="utf-8"><\/script>';$(this).html(b);
jQuery.multiSocialService.tracking("twitter",a.url);return this};
jQuery.fn.setTwitterFollow=function(a){a=jQuery.multiSocialService.initialize(jQuery.extend(true,{},jQuery.multiSocialService.twitter.follow,a));a='\t\t<a href="https://twitter.com/'+a.user+'" class="twitter-follow-button" \t\tdata-show-count="'+a.show_count+'" data-button="'+a["data-button"]+'"\t\tdata-text-color="'+a["data-text-color"]+'" data-link-color="'+a["data-link-color"]+'" \t\tdata-lang="'+a.lang+'">follow</a><script type="text/javascript" src="http://platform.twitter.com/widgets.js" charset="utf-8"><\/script>';$(this).html(a);
return this};
jQuery.fn.setTwitterTweetLite=function(a){a=jQuery.extend(true,{},jQuery.multiSocialService.twitter.tweetLite,a);a.url=$.type(a.url)==="string"&&a.url.length>0?encodeURIComponentRFC3986(a.url):jQuery.multiSocialService.url;$(this).click(function(){window.open("https://twitter.com/intent/tweet?"+(a.text!==""?"text="+encodeURIComponentRFC3986(a.text):"")+"&url="+a.url+(a.via!==""?"&via="+a.via:""),"","toolbar=0, status=0, width=650, height=360");jQuery.multiSocialService.enableTracking===true&&_gaq.push(["_trackSocial",
"twitter","tweet"])})};jQuery.getTwitterTweetCount=function(a){var b=jQuery.type(a.url)==="string"?a.url:decodeURIComponent(jQuery.multiSocialService.url);jQuery.ajax({url:"http://cdn.api.twitter.com/1/urls/count.json",data:{url:b},dataType:"jsonp",cache:false,success:function(c){a.callback.call(this,c)}})};
jQuery.fn.setFacebookLike=function(a){a=jQuery.extend(true,{},jQuery.multiSocialService.facebook.like,a);if(a.lang==="en")a.lang="locale=en_US&";if($("meta").filter(function(){return $(this).attr("property")==="fb:app_id"}).attr("content")!==undefined)a.ogp.app_id=$("meta").filter(function(){return $(this).attr("property")==="fb:app_id"}).attr("content");if(a.ogp.app_id){$("head").append("<meta property='fb:app_id' content='"+a.ogp.app_id+"' />");var b="";b+='<div id="fb-root"></div>';b+="<script>(function(d, s, id) {";
b+="  var js, fjs = d.getElementsByTagName(s)[0];";b+="  if (d.getElementById(id)) {return;}";b+="  js = d.createElement(s); js.id = id;";b+='  js.src = "//connect.facebook.net/ja_JP/all.js#xfbml=1&appId='+a.ogp.app_id+'";';b+="  fjs.parentNode.insertBefore(js, fjs);";b+='}(document, "script", "facebook-jssdk"));<\/script>';$("body").append(b);$("html").attr("xmlns:fb","http://ogp.me/ns/fb#");b="";b+='<fb:like href="'+encodeURIComponent(jQuery.multiSocialService.url)+'"';b+='send="'+a.send+'"';b+=
'layout="'+a.type+'"';b+='width="'+a.width+'"';b+='show_faces="'+a.show_faces+'"';b+="></fb:like>";$(this).html(b)}else{b="<iframe src='http://www.facebook.com/plugins/like.php?"+a.lang+"\t\t\tapp_id="+a.ogp.app_id+"\t\t\t&href="+encodeURIComponent(jQuery.multiSocialService.url)+"\t\t\t&amp;layout="+a.type+"\t\t\t&amp;show_faces="+a.show_faces+"\t\t\t&amp;width=450&amp;action=like&amp;font\t\t\t&amp;colorscheme="+a.color+"\t\t\t&amp;height=21' scrolling='no' frameborder='0' style='border:none; overflow:hidden; \t\t\twidth:"+
a.width+"px; height:"+a.height+"px;' allowTransparency='true'></iframe>";$(this).html(b)}jQuery.multiSocialService.tracking("facebook",a.url);return this};
jQuery.fn.setFacebookComments=function(a){a=jQuery.extend(true,{},jQuery.multiSocialService.facebook.comments,a);if($("meta").filter(function(){return $(this).attr("property")==="fb:app_id"}).attr("content")!==undefined)a.app_id=$("meta").filter(function(){return $(this).attr("property")==="fb:app_id"}).attr("content");if(!a.app_id)return false;var b="";b+='<div id="fb-root"></div>';b+="<script>(function(d, s, id) {";b+="  var js, fjs = d.getElementsByTagName(s)[0];";b+="  if (d.getElementById(id)) {return;}";
b+="  js = d.createElement(s); js.id = id;";b+='  js.src = "//connect.facebook.net/ja_JP/all.js#xfbml=1&appId='+a.app_id+'";';b+="  fjs.parentNode.insertBefore(js, fjs);";b+='}(document, "script", "facebook-jssdk"));<\/script>';$("body").append(b);$("html").attr("xmlns:fb","http://ogp.me/ns/fb#");b="";b+='<fb:comments href="'+encodeURIComponent(jQuery.multiSocialService.url)+'"';b+='num_posts="'+a.num_posts+'"';b+='width="'+a.width+'"';b+="></fb:comments>";$(this).html(b);return this};
jQuery.fn.setFacebookLikeLite=function(a){a=jQuery.extend(true,{},jQuery.multiSocialService.facebook.likeLite,a);a.url=$.type(a.url)==="string"&&a.url.length>0?encodeURIComponentRFC3986(a.url):jQuery.multiSocialService.url;$(this).click(function(){window.open("http://www.facebook.com/sharer.php?u="+a.url+"","","toolbar=0, status=0, width=900, height=500");jQuery.multiSocialService.enableTracking===true&&_gaq.push(["_trackSocial","facebook","like"])})};
jQuery.getFacebookCount=function(a){var b=jQuery.type(a.url)==="string"?a.url:decodeURIComponent(jQuery.multiSocialService.url);jQuery.ajax({url:"http://graph.facebook.com/"+b,dataType:"jsonp",cache:false,success:function(c){a.callback.call(this,c)}})};
jQuery.fn.setEvernoteClip=function(a){a=jQuery.extend(true,{},jQuery.multiSocialService.evernote.clip,a);a='<script type="text/javascript" src="http://static.evernote.com/noteit.js" charset="utf-8"><\/script><a href="#" onclick="Evernote.doClip({contentId:\''+a.targetId+"',providerName:'"+a.name+"',url:'"+a.url+"',suggestTags:'"+a.tag+"',title:'"+a.noteTitle+'\'}); return false;"><img src="http://static.evernote.com/article-clipper-jp.png" alt="Clip to Evernote" /></a>';$(this).html(a);return this};
jQuery.fn.setMixiCheck=function(a){a=jQuery.extend(true,{},jQuery.multiSocialService.mixi.check,a);if(a.data_key===""){alert("plase set data_key.");return false}a='<a href="http://mixi.jp/share.pl" class="mixi-check-button" data-key="'+a["data-key"]+'" data-url="'+a["data-url"]+'" data-button="'+a["data-button"]+'">mixi\u30c1\u30a7\u30c3\u30af</a>\t\t\t\t\t\t<script type="text/javascript" src="http://static.mixi.jp/js/share.js" charset="utf-8"><\/script>\t\t\t\t\t\t';$(this).html(a);return this};
jQuery.fn.setMixiLike=function(a){a=jQuery.extend(true,jQuery.multiSocialService.mixi.like,a);a.href=jQuery.multiSocialService.url;if(a.service_key===""){alert("plase set service_key.");return false}a='<iframe src="http://plugins.mixi.jp/favorite.pl?'+$.param(a)+'" \t\t\t\t\t   scrolling="no" frameborder="0" allowTransparency="true" style="border:0; overflow:hidden; width:'+a.width+"px; height:"+a.height+'px;"></iframe>';$(this).html(a);return this};
jQuery.fn.setGreeLike=function(a){a=jQuery.extend(true,{},jQuery.multiSocialService.gree.like,a);a.href=jQuery.multiSocialService.url;a='<iframe src="http://share.gree.jp/share?url='+a.href+"&type="+a.type+"&height="+a.height+'" \t\t\t\t\t   scrolling="no" frameborder="0" marginwidth="0" marginheight="0" style="border:none; overflow:hidden; \t\t\t\t\t   width:100px; height:'+a.height+'px;" allowTransparency="true">\t\t\t\t\t   </iframe>';$(this).html(a);return this};
jQuery.fn.setGooglePlus1=function(a){a=jQuery.extend(true,{},jQuery.multiSocialService.google.plus1,a);a.url=$.type(a.url)==="string"&&a.url.length>0?encodeURIComponentRFC3986(a.url):jQuery.multiSocialService.url;var b="";b+='<script type="text/javascript" src="https://apis.google.com/js/plusone.js" charset="utf-8">{lang: "'+a.lang+'"}<\/script>';b+='<g:plusone size="'+a.size+'" count="'+a.count+'" href="'+a.url+'" callback="'+a.callback+'"></g:plusone>';$(this).html(b);return this};
jQuery.setOGP=function(a){a=jQuery.extend(true,{},{title:document.title},a);var b="";b+="<meta property='og:title' content='"+a.title+"' />";b+="<meta property='og:url' content='"+jQuery.multiSocialService.url+"' />";if(a.image)b+="<meta property='og:image' content='"+a.image+"' />";if(a.description)b+="<meta property='og:description' content='"+a.description+"' />";if(a.type)b+="<meta property='og:type' content='"+a.type+"' />";if(a.site_name)b+="<meta property='og:site_name' content='"+a.site_name+
"' />";$("head").append(b)};
jQuery.multiSocialService.tracking=function(a){if(jQuery.multiSocialService.enableTracking!==true&&jQuery.type(_gaq)==="undefined")return true;if(a==="facebook")fb=window.setInterval(function(){if(typeof FB!=="undefined"){FB.Event.subscribe("edge.create",function(b){_gaq.push(["_trackSocial","facebook","like",b])});FB.Event.subscribe("edge.remove",function(b){_gaq.push(["_trackSocial","facebook","unlike",b])});FB.Event.subscribe("message.send",function(b){_gaq.push(["_trackSocial","facebook","send",
b])});clearInterval(fb)}},1E3);else if(a==="twitter")tw=window.setInterval(function(){if(typeof twttr!=="undefined"){twttr.events.bind("tweet",function(b){b&&_gaq.push(["_trackSocial","twitter","tweet"])});clearInterval(tw)}},1E3)};
