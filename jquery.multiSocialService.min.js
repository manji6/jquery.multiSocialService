/**
* Multi Social Service Plugin
*
* This Plugin is connect your site to social service.
*
* [Support Social Service]
*  + Hatena Bookmark
*  + Twitter
*  + Facebook
*  + Evernote
*  + mixi check
*  + mixi like
*  + gree like
*  + Google +1
*  + tumblr(comming soon...)
*
* @author   Ryosuke Sawada as manji6 <http://manjiro.net>
* @requires jQuery
* @license  MIT licence
*
**/
jQuery.multiSocialService={url:location.href,useService:"twitter,facebookLike,hatenaBookmark,evernoteClip,mixiLike,greeLike".split(","),hatenaBookmark:{type:"horizontal"},twitter:{tweet:{type:"horizontal",lang:"",text:"",via:""},follow:{user:"","data-button":"","data-text-color":"","data-link-color":"",show_count:"true",lang:"ja"}},facebook:{like:{type:"button_count",show_faces:"false",color:"light",width:100,height:23,lang:"",send:"false",ogp:{title:document.title,image:"",description:"",app_id:"",
type:"blog",site_name:""}},comments:{num_posts:"3",width:"500",app_id:""}},evernote:{clip:{targetId:"container",name:"",tag:"",url:"",noteTitle:$("title").text()}},mixi:{check:{"data-key":"","data-url":"","data-button":"button-1"},like:{href:"",service_key:"",width:"450",height:"80",show_faces:"false"}},gree:{like:{href:"",service_key:"",type:0,height:20}},google:{plus1:{lang:"ja",callback:"",count:true,size:""}},tumblr:{url:"",setType:"link",type:"vertical",title:document.title,description:$("meta:[name^='description']").attr("content")}};
jQuery.fn.setMultiSocialService=function(){var a="<div class='multiSocialService-container'><ul class='multiSocialService-list' style='list-style-type:none'>";for(i in jQuery.multiSocialService.useService)switch(jQuery.multiSocialService.useService[i]){case "hatenaBookmark":a+='<li class="multiSocialService-hatenaBookmark">'+jQuery("<li />").setHatenaBookmark(jQuery.multiSocialService.hatenaBookmark).html()+"</li>";break;case "twitter":a+='<li class="multiSocialService-twitter">'+jQuery("<li />").setTwitter(jQuery.multiSocialService.twitter.tweet).html()+
"</li>";break;case "facebookLike":a+='<li class="multiSocialService-facebookLike">'+jQuery("<li />").setFacebookLike(jQuery.multiSocialService.facebook.like).html()+"</li>";break;case "evernoteClip":a+='<li class="multiSocialService-evernoteClip">'+jQuery("<li />").setEvernoteClip(jQuery.multiSocialService.evernote.clip).html()+"</li>";break;case "mixiCheck":a+='<li class="multiSocialService-mixiCheck">'+jQuery("<li />").setMixiCheck(jQuery.multiSocialService.mixi.check).html()+"</li>";break;case "mixiLike":a+=
'<li class="multiSocialService-mixiLike">'+jQuery("<li />").setMixiLike(jQuery.multiSocialService.mixi.like).html()+"</li>";break;case "greeLike":a+='<li class="multiSocialService-greeLike">'+jQuery("<li />").setGreeLike(jQuery.multiSocialService.gree.like).html()+"</li>";break;case "googlePlus1":a+='<li class="multiSocialService-googlePlus1">'+jQuery("<li />").setGooglePlus1(jQuery.multiSocialService.google.plus1).html()+"</li>"}a+="</ul></div>";$(this).html($(a).find("li").css("display","inline").end().html());
return this};jQuery.multiSocialService.initialize=function(a){typeof a==="string"?a=encodeURIComponentRFC3986(decodeURIComponent(a)):a.url=encodeURIComponentRFC3986(decodeURIComponent(a.url));return a};
jQuery.fn.setHatenaBookmark=function(a){a=jQuery.multiSocialService.initialize(jQuery.extend(true,{},jQuery.multiSocialService.hatenaBookmark,a));a='<a href="http://b.hatena.ne.jp/entry/'+jQuery.multiSocialService.url+'" class="hatena-bookmark-button" data-hatena-bookmark-layout="'+a.type+'" title="\u3053\u306e\u30a8\u30f3\u30c8\u30ea\u30fc\u3092\u306f\u3066\u306a\u30d6\u30c3\u30af\u30de\u30fc\u30af\u306b\u8ffd\u52a0"><img src="http://b.st-hatena.com/images/entry-button/button-only.gif" alt="\u3053\u306e\u30a8\u30f3\u30c8\u30ea\u30fc\u3092\u306f\u3066\u306a\u30d6\u30c3\u30af\u30de\u30fc\u30af\u306b\u8ffd\u52a0" width="20" height="20" style="border: none;" /></a><script type="text/javascript" src="http://b.st-hatena.com/js/bookmark_button.js" charset="utf-8" async="async"><\/script>';$(this).html(a);
return this};jQuery.fn.setTwitter=function(a){a=jQuery.multiSocialService.initialize(jQuery.extend(true,{},jQuery.multiSocialService.twitter.tweet,a));a='<a href="http://twitter.com/share" data-url="'+jQuery.multiSocialService.url+'" class="twitter-share-button" data-count="'+a.type+'" data-via="'+a.via+'" data-text="'+a.text+'" data-lang="'+a.lang+'">Tweet</a><script type="text/javascript" src="http://platform.twitter.com/widgets.js" charset="utf-8"><\/script>';$(this).html(a);return this};
jQuery.fn.setTwitterFollow=function(a){a=jQuery.multiSocialService.initialize(jQuery.extend(true,{},jQuery.multiSocialService.twitter.follow,a));a='<a href="https://twitter.com/'+a.user+'" class="twitter-follow-button" data-show-count="'+a.show_count+'" data-button="'+a["data-button"]+'" data-text-color="'+a["data-text-color"]+'" data-link-color="'+a["data-link-color"]+'" data-lang="'+a.lang+'">follow</a><script type="text/javascript" src="http://platform.twitter.com/widgets.js" charset="utf-8"><\/script>';
$(this).html(a);return this};
jQuery.fn.setFacebookLike=function(a){a=jQuery.extend(true,{},jQuery.multiSocialService.facebook.like,a);if(a.lang==="en")a.lang="locale=en_US&";if($("meta").filter(function(){return $(this).attr("property")==="fb:app_id"}).attr("content")!==void 0)a.ogp.app_id=$("meta").filter(function(){return $(this).attr("property")==="fb:app_id"}).attr("content");if(a.ogp.app_id){$("head").append("<meta property='fb:app_id' content='"+a.ogp.app_id+"' />");var b=[];b.push('<div id="fb-root"></div>');b.push("<script>(function(d, s, id) {");
b.push("  var js, fjs = d.getElementsByTagName(s)[0];");b.push("  if (d.getElementById(id)) {return;}");b.push("  js = d.createElement(s); js.id = id;");b.push('  js.src = "//connect.facebook.net/ja_JP/all.js#xfbml=1&appId='+a.ogp.app_id+'";');b.push("  fjs.parentNode.insertBefore(js, fjs);");b.push('}(document, "script", "facebook-jssdk"));<\/script>');$("body").append(b.join(""));$("html").attr("xmlns:fb","http://ogp.me/ns/fb#");b=[];b.push('<fb:like href="'+encodeURIComponent(jQuery.multiSocialService.url)+
'"');b.push('send="'+a.send+'"');b.push('layout="'+a.type+'"');b.push('width="'+a.width+'"');b.push('show_faces="'+a.show_faces+'"');b.push("></fb:like>");$(this).html(b.join(" "))}else a="<iframe src='http://www.facebook.com/plugins/like.php?"+a.lang+"app_id="+a.ogp.app_id+"&href="+encodeURIComponent(jQuery.multiSocialService.url)+"&amp;layout="+a.type+"&amp;show_faces="+a.show_faces+"&amp;width=450&amp;action=like&amp;font&amp;colorscheme="+a.color+"&amp;height=21' scrolling='no' frameborder='0' style='border:none; overflow:hidden; width:"+
a.width+"px; height:"+a.height+"px;' allowTransparency='true'></iframe>",$(this).html(a);return this};
jQuery.fn.setFacebookComments=function(a){a=jQuery.extend(true,{},jQuery.multiSocialService.facebook.comments,a);if($("meta").filter(function(){return $(this).attr("property")==="fb:app_id"}).attr("content")!==void 0)a.app_id=$("meta").filter(function(){return $(this).attr("property")==="fb:app_id"}).attr("content");if(!a.app_id)return false;var b=[];b.push('<div id="fb-root"></div>');b.push("<script>(function(d, s, id) {");b.push("  var js, fjs = d.getElementsByTagName(s)[0];");b.push("  if (d.getElementById(id)) {return;}");
b.push("  js = d.createElement(s); js.id = id;");b.push('  js.src = "//connect.facebook.net/ja_JP/all.js#xfbml=1&appId='+a.app_id+'";');b.push("  fjs.parentNode.insertBefore(js, fjs);");b.push('}(document, "script", "facebook-jssdk"));<\/script>');$("body").append(b.join(""));$("html").attr("xmlns:fb","http://ogp.me/ns/fb#");b=[];b.push('<fb:comments href="'+encodeURIComponent(jQuery.multiSocialService.url)+'"');b.push('num_posts="'+a.num_posts+'"');b.push('width="'+a.width+'"');b.push("></fb:comments>");
$(this).html(b.join(" "));return this};
jQuery.fn.setEvernoteClip=function(a){a=jQuery.extend(true,{},jQuery.multiSocialService.evernote.clip,a);a='<script type="text/javascript" src="http://static.evernote.com/noteit.js" charset="utf-8"><\/script><a href="#" onclick="Evernote.doClip({contentId:\''+a.targetId+"',providerName:'"+a.name+"',url:'"+a.url+"',suggestTags:'"+a.tag+"',title:'"+a.noteTitle+'\'}); return false;"><img src="http://static.evernote.com/article-clipper-jp.png" alt="Clip to Evernote" /></a>';$(this).html(a);return this};
jQuery.fn.setMixiCheck=function(a){a=jQuery.extend(true,{},jQuery.multiSocialService.mixi.check,a);if(a.data_key==="")return alert("plase set data_key."),false;a='<a href="http://mixi.jp/share.pl" class="mixi-check-button" data-key="'+a["data-key"]+'" data-url="'+a["data-url"]+'" data-button="'+a["data-button"]+'">mixi\u30c1\u30a7\u30c3\u30af</a><script type="text/javascript" src="http://static.mixi.jp/js/share.js" charset="utf-8"><\/script>';$(this).html(a);return this};
jQuery.fn.setMixiLike=function(a){a=jQuery.extend(true,jQuery.multiSocialService.mixi.like,a);a.href=jQuery.multiSocialService.url;if(a.service_key==="")return alert("plase set service_key."),false;a='<iframe src="http://plugins.mixi.jp/favorite.pl?'+$.param(a)+'" scrolling="no" frameborder="0" allowTransparency="true" style="border:0; overflow:hidden; width:'+a.width+"px; height:"+a.height+'px;"></iframe>';$(this).html(a);return this};
jQuery.fn.setGreeLike=function(a){a=jQuery.extend(true,{},jQuery.multiSocialService.gree.like,a);a.href=jQuery.multiSocialService.url;a='<iframe src="http://share.gree.jp/share?url='+a.href+"&type="+a.type+"&height="+a.height+'" scrolling="no" frameborder="0" marginwidth="0" marginheight="0" style="border:none; overflow:hidden; width:100px; height:'+a.height+'px;" allowTransparency="true"></iframe>';$(this).html(a);return this};
jQuery.fn.setGooglePlus1=function(a){var a=jQuery.extend(true,{},jQuery.multiSocialService.google.plus1,a),b=[];b.push('<script type="text/javascript" src="https://apis.google.com/js/plusone.js" charset="utf-8">{lang: "'+a.lang+'"}<\/script>');b.push('<g:plusone size="'+a.size+'" count="'+a.count+'" href="'+jQuery.multiSocialService.url+'" callback="'+a.callback+'"></g:plusone>');$(this).html(b.join(""));return this};
jQuery.setOGP=function(a){a=jQuery.extend(true,{},{title:document.title},a);$("head").append("<meta property='og:title' content='"+a.title+"' />");$("head").append("<meta property='og:url' content='"+jQuery.multiSocialService.url+"' />");a.image&&$("head").append("<meta property='og:image' content='"+a.image+"' />");a.description&&$("head").append("<meta property='og:description' content='"+a.description+"' />");a.type&&$("head").append("<meta property='og:type' content='"+a.type+"' />");a.site_name&&
$("head").append("<meta property='og:site_name' content='"+a.site_name+"' />")};
jQuery.fn.setTumblr=function(a){a=jQuery.multiSocialService.initialize(jQuery.extend(true,{},jQuery.multiSocialService.tumblr,a));a.href=jQuery.multiSocialService.url;var b={};switch(a.setType){case "link":a.url&&(b.url=a.url),a.name&&(b.name=a.title),a.description&&(b.description=a.description)}a=[];a.push('<script type="text/javascript" src="http://platform.tumblr.com/v1/share.js"><\/script>');a.push('<a href="http://www.tumblr.com/share/link?'+jQuery.param(b)+'" title="Share on Tumblr" style="display:inline-block; text-indent:-9999px; overflow:hidden; width:81px; height:20px; background:url(\'http://platform.tumblr.com/v1/share_1.png\') top left no-repeat transparent;">');
a.push("Share on Tumblr");a.push("</a>");$(this).html(a.join(""));return this};function encodeURIComponentRFC3986(a){return encodeURIComponent(a).replace(/[!*'()]/g,function(a){return"%"+a.charCodeAt(0).toString(16)})};
